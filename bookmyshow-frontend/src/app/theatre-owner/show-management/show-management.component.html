<div class="show-container mat-elevation-z2">
  <h2 class="mat-headline">Manage Shows</h2>

  <!-- ðŸŽ¬ Show Form -->
  <form [formGroup]="form" (ngSubmit)="submitForm()" class="show-form">
    <mat-card>
      <mat-card-title>{{ editingShowId ? 'Update Show' : 'Add New Show' }}</mat-card-title>
      <mat-card-content class="form-grid">

        <!-- Screen Selector -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Select Screen</mat-label>
          <mat-select formControlName="screenNumber" required>
            <mat-option *ngFor="let screen of screens" [value]="screen.screenNumber">
              Screen {{ screen.screenNumber }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Movie Selector -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Select Movie</mat-label>
          <mat-select formControlName="movieId" required>
            <mat-option *ngFor="let movie of movieList" [value]="movie.movieId">
              {{ movie.title }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Show Date -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Show Date</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="showDate" required />
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <!-- Show Time -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Show Time (hh:mm AM/PM)</mat-label>
          <input matInput formControlName="showTime" placeholder="07:30 PM" required />
        </mat-form-field>

        <!-- Total Seats -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Total Seats</mat-label>
          <input type="number" matInput formControlName="totalSeats" required />
        </mat-form-field>

        <!-- Ticket Price -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Ticket Price</mat-label>
          <input type="number" matInput formControlName="ticketPrice" required />
        </mat-form-field>

      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-flat-button color="primary" type="submit">
          {{ editingShowId ? 'Update Show' : 'Add Show' }}
        </button>
        <button mat-stroked-button type="button" (click)="resetForm()">Clear</button>
      </mat-card-actions>
    </mat-card>
  </form>

  <!-- ðŸ“‹ Show List -->
  <div class="show-list mt-4">
    <h3 class="mat-subheading-1">Existing Shows</h3>

    <mat-card *ngIf="shows.length > 0; else noShows">
      <table mat-table [dataSource]="shows" class="mat-elevation-z2 full-width-table">

        <!-- Date -->
        <ng-container matColumnDef="showDate">
          <th mat-header-cell *matHeaderCellDef> Date </th>
          <td mat-cell *matCellDef="let show"> {{ show.showDate }} </td>
        </ng-container>

        <!-- Time -->
        <ng-container matColumnDef="showTime">
          <th mat-header-cell *matHeaderCellDef> Time </th>
          <td mat-cell *matCellDef="let show"> {{ show.showTime }} </td>
        </ng-container>

        <!-- Movie -->
        <ng-container matColumnDef="movie">
          <th mat-header-cell *matHeaderCellDef> Movie </th>
          <td mat-cell *matCellDef="let show"> {{ getMovieTitle(show.movieId) }} </td>
        </ng-container>

        <!-- Seats -->
        <ng-container matColumnDef="seats">
          <th mat-header-cell *matHeaderCellDef> Seats </th>
          <td mat-cell *matCellDef="let show"> {{ show.availableSeats?.length }} </td>
        </ng-container>

        <!-- Price -->
        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef> Price (â‚¹) </th>
          <td mat-cell *matCellDef="let show"> â‚¹{{ show.ticketPrice }} </td>
        </ng-container>

        <!-- Actions -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef> Actions </th>
          <td mat-cell *matCellDef="let show">
            <button mat-icon-button color="primary" (click)="editShow(show)">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="warn" (click)="deleteShow(show.showId)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['showDate', 'showTime', 'movie', 'seats', 'price', 'actions']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['showDate', 'showTime', 'movie', 'seats', 'price', 'actions'];"></tr>
      </table>
    </mat-card>

    <ng-template #noShows>
      <p class="text-center mt-2">No shows available.</p>
    </ng-template>
  </div>
</div>
